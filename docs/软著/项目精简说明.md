## 项目精简说明（2024 提交版本）

### 精简原则
以 `src/main.c` 的 `nb()` 实际调用为准，仅保留 H30 姿态来源、四轮电机、舵机、超声波避障与实际使用的运动控制链路。

### 已删除的冗余模块（`board/` 下）
- ✗ `pose.c|h`：视觉误差解析与姿态矫正（未在 `nb()` 中使用）
- ✗ `motion_controller.c|h`：通用姿态控制（已被 `my_move` 替代）
- ✗ `uarttouart.c|h`：视觉通信接口（未使用）
- ✗ `move.c|h`：旧版运动控制（已被 `my_move` 完全替代）
- ✗ `map.c|h`：地图相关（未使用）

### 保留的核心模块
- ✓ `board/h30.c|h`：H30 惯性姿态模块接口（I2C 读取欧拉角与角速度）
- ✓ `board/my_move.c|h`：实际使用的运动控制（直行航向保持、定角转弯、避障、PID 差速）
- ✓ `board/dc_motor_control.c|h`、`board/motor_control.c|h`：四轮 520 电机驱动
- ✓ `board/servo_control.c|h`、`board/servo2_control.c|h`：舵机控制
- ✓ `board/hcsr04.c|h`：超声波避障
- ✓ `board/board_delay.c|h`：基础延时
- ✓ `src/main.c`：系统初始化 + `nb()` 任务流程

### `src/main.c` 清理
- 删除未使用的旧运动序列函数（`step1_straight_3s` ~ `step8_final_stop`、`execute_movement_sequence`、`enter_monitoring_mode`、`monitor_raw_yaw`）
- 删除未使用的 include（`motion_controller.h`、`move.h`）
- 删除 `motion_control_init()`（参数设置已集成到 `my_move` 内部）
- 仅保留 `system_init()`、`nb()` 与 `main()`

### 实际调用链路（`nb()` 流程）
```
system_init() 
  ↓
nb()
  ├─ MyMove_StraightInit()  // 静止采样 H30 yaw 作为参考
  ├─ MyMove_StraightHoldYawWithObstacleAvoidanceUseTarget(...)  // 第1次直行 + 避障
  ├─ MyMove_TurnRight90WithServo(...)  // 右转90° + 舵机联动
  ├─ MyMove_SetStraightTarget(first_target - 90)  // 更新目标航向
  ├─ MyMove_StraightHoldYawWithObstacleAvoidanceUseTarget(...)  // 第2次直行
  ├─ servo_set_angle(105)  // 舵机动作
  ├─ MyMove_StraightHoldYawWithObstacleAvoidanceUseTarget(...)  // 第3次直行
  ├─ MyMove_TurnRight90WithServo(...)  // 第2次右转90°
  ├─ MyMove_SetStraightTarget(first_target - 180)  // 更新目标航向
  ├─ MyMove_StraightHoldYawWithObstacleAvoidanceUseTarget(...)  // 第4次直行
  └─ servo_set_angle(80)  // 收尾
```

### 软著材料对应
- **源代码选编**：见 `docs/软著/源代码选编/文件清单.txt`（17 个文件）
- **软件说明书**：已更新至精简后模块（`my_move` 为核心，移除视觉接口说明）
- **提交代码版本**：与实际工程一致（精简后）

### 构建与验证
- 精简后代码与原工程在同一目录，可直接编译
- 功能验证：`nb()` 流程完整，包含 H30 航向保持、避障、舵机联动转弯

### 版本标识
- 提交版本号：V1.0
- 生成时间：2024-11-02
- 说明：本版本为软著提交版，已移除未使用的视觉接口与旧版运动控制模块

